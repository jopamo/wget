# Repository Guidelines

## Project Structure & Module Organization
`src/` hosts the C downloader sources, while `lib/` and `gnulib` carry shared utilities regenerated by `bootstrap`. Protocol docs and manuals live in `doc/`, translations in `po/`, and packaging helpers under `build-aux/` plus `cfg.mk`. Regression suites are split between `tests/` (Perl HTTP/FTP harnesses) and `testenv/` (Python fixtures for complex server setups). Example configs and helper scripts reside in `contrib/` and `util/`. Keep generated artifacts out of version control; autotools outputs must be built locally.

## Build, Test, and Development Commands
Run `./bootstrap` whenever gnulib modules or build scripts change; it fetches dependencies and regenerates autotools glue. Configure with `./configure --enable-assert --with-ssl=gnutls` (or `--with-ssl=openssl`) to turn on assertions and select a TLS backend. Use `make -j$(nproc)` for fast builds, `make check` to exercise both suites, and `src/wget --version` to verify the binary. `make syntax-check` (gnulib) enforces stylistic rules before submission.

## Coding Style & Naming Conventions
Follow the GNU Coding Standards: two-space indents, K&R braces, and lowercase_with_underscores for functions and files. Prefer enums/macros over magic numbers and wrap translatable strings with `_()`. Keep modules cohesive (`http.c`, `ftp.c`, etc.) and update headers in `src/*.h` when exporting symbols. Rerun `./bootstrap && ./configure` if you edit `configure.ac`, `Makefile.am`, or anything under `m4/`.

## Testing Guidelines
Perl tests in `tests/` mirror feature names (`Test-IRIs.pl`, `Test-HTTPS.pl`); follow the prefix and extend the harness as needed. Python scenarios in `testenv/` use `Test-*.py` and can wrap executions with `GDB_TESTS=1` or `VALGRIND_TESTS=1`. Always run `make check` before sending patches; re-run specific cases with `cd tests && ./run_test Test-FTP.pl` or `cd testenv && ./Test-O.py`. Keep coverage parity with existing modules when adding protocol support.

## Commit & Pull Request Guidelines
Commits follow the short, component-tagged style visible in `git log` (for example, ``src/url.c: tighten verbose logging``). Describe both motivation and fix, and include `Fixes: #NNN` when applicable. Pull requests or emailed patches should link to bug reports, mention required configure flags, and include reproduction steps or new tests. Logs that show failure/success pairs are more useful than screenshots.

## Security & Configuration Tips
Prefer GnuTLS or OpenSSL via the configure toggle, and document any non-default library paths (e.g., ``PKG_CONFIG_PATH=/opt/gnutls/lib/pkgconfig``) in your patch description. When adding network-facing code, run under Valgrind/ASan and mention the results so reviewers can focus on logic rather than memory hygiene.
